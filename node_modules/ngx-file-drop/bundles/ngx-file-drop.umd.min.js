!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-file-drop",["exports","@angular/core","rxjs","@angular/common"],t):t((e=e||self)["ngx-file-drop"]={},e.ng.core,e.rxjs,e.ng.common)}(this,(function(e,t,n,r){"use strict";var i=function(e,t){this.relativePath=e,this.fileEntry=t},o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.template=e}return e.ctorParameters=function(){return[{type:t.TemplateRef}]},e=o([t.Directive({selector:"[ngx-file-drop-content-tmp]"}),s("design:paramtypes",[t.TemplateRef])],e)}(),p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,n){var r=this;this.zone=e,this.renderer=n,this.accept="*",this.directory=!1,this.multiple=!0,this.dropZoneLabel="",this.dropZoneClassName="ngx-file-drop__drop-zone",this.useDragEnter=!1,this.contentClassName="ngx-file-drop__content",this.showBrowseBtn=!1,this.browseBtnClassName="btn btn-primary btn-xs ngx-file-drop__browse-btn",this.browseBtnLabel="Browse files",this.onFileDrop=new t.EventEmitter,this.onFileOver=new t.EventEmitter,this.onFileLeave=new t.EventEmitter,this.isDraggingOverDropZone=!1,this.globalDraggingInProgress=!1,this.files=[],this.numOfActiveReadEntries=0,this.helperFormEl=null,this.fileInputPlaceholderEl=null,this.dropEventTimerSubscription=null,this._disabled=!1,this.openFileSelector=function(e){r.fileSelector&&r.fileSelector.nativeElement&&r.fileSelector.nativeElement.click()},this.globalDragStartListener=this.renderer.listen("document","dragstart",(function(e){r.globalDraggingInProgress=!0})),this.globalDragEndListener=this.renderer.listen("document","dragend",(function(e){r.globalDraggingInProgress=!1}))}return Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&""+e!="false"},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.dropEventTimerSubscription&&(this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=null),this.globalDragStartListener(),this.globalDragEndListener(),this.files=[],this.helperFormEl=null,this.fileInputPlaceholderEl=null},e.prototype.onDragOver=function(e){this.useDragEnter?this.preventAndStop(e):this.isDropzoneDisabled()||this.useDragEnter||(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragEnter=function(e){!this.isDropzoneDisabled()&&this.useDragEnter&&(this.isDraggingOverDropZone||(this.isDraggingOverDropZone=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragLeave=function(e){this.isDropzoneDisabled()||(this.isDraggingOverDropZone&&(this.isDraggingOverDropZone=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))},e.prototype.dropFiles=function(e){if(!this.isDropzoneDisabled()&&(this.isDraggingOverDropZone=!1,e.dataTransfer)){e.dataTransfer.dropEffect="copy";var t=void 0;t=e.dataTransfer.items?e.dataTransfer.items:e.dataTransfer.files,this.preventAndStop(e),this.checkFiles(t)}},e.prototype.uploadFiles=function(e){if(!this.isDropzoneDisabled()&&e.target){var t=e.target.files||[];this.checkFiles(t),this.resetFileInput()}},e.prototype.checkFiles=function(e){for(var t=this,r=function(t){var n=e[t],r=null;if(o.canGetAsEntry(n)&&(r=n.webkitGetAsEntry()),r)if(r.isFile){l=new i(r.name,r);o.addToQueue(l)}else r.isDirectory&&o.traverseFileTree(r,r.name);else if(n){var s={name:n.name,isDirectory:!1,isFile:!0,file:function(e){e(n)}},l=new i(s.name,s);o.addToQueue(l)}},o=this,s=0;s<e.length;s++)r(s);this.dropEventTimerSubscription&&this.dropEventTimerSubscription.unsubscribe(),this.dropEventTimerSubscription=n.timer(200,200).subscribe((function(){if(t.files.length>0&&0===t.numOfActiveReadEntries){var e=t.files;t.files=[],t.onFileDrop.emit(e)}}))},e.prototype.traverseFileTree=function(e,t){var n=this;if(e.isFile){var r=new i(t,e);this.files.push(r)}else{t+="/";var o=e.createReader(),s=[],l=function(){n.numOfActiveReadEntries++,o.readEntries((function(r){if(r.length)s=s.concat(r),l();else if(0===s.length){var o=new i(t,e);n.zone.run((function(){n.addToQueue(o)}))}else for(var p=function(e){n.zone.run((function(){n.traverseFileTree(s[e],t+s[e].name)}))},a=0;a<s.length;a++)p(a);n.numOfActiveReadEntries--}))};l()}},e.prototype.resetFileInput=function(){if(this.fileSelector&&this.fileSelector.nativeElement){var e=this.fileSelector.nativeElement,t=e.parentElement,n=this.getHelperFormElement(),r=this.getFileInputPlaceholderElement();t!==n&&(this.renderer.insertBefore(t,r,e),this.renderer.appendChild(n,e),n.reset(),this.renderer.insertBefore(t,e,r),this.renderer.removeChild(t,r))}},e.prototype.getHelperFormElement=function(){return this.helperFormEl||(this.helperFormEl=this.renderer.createElement("form")),this.helperFormEl},e.prototype.getFileInputPlaceholderElement=function(){return this.fileInputPlaceholderEl||(this.fileInputPlaceholderEl=this.renderer.createElement("div")),this.fileInputPlaceholderEl},e.prototype.canGetAsEntry=function(e){return!!e.webkitGetAsEntry},e.prototype.isDropzoneDisabled=function(){return this.globalDraggingInProgress||this.disabled},e.prototype.addToQueue=function(e){this.files.push(e)},e.prototype.preventAndStop=function(e){e.stopPropagation(),e.preventDefault()},e.ctorParameters=function(){return[{type:t.NgZone},{type:t.Renderer2}]},p([t.Input(),a("design:type",String)],e.prototype,"accept",void 0),p([t.Input(),a("design:type",Boolean)],e.prototype,"directory",void 0),p([t.Input(),a("design:type",Boolean)],e.prototype,"multiple",void 0),p([t.Input(),a("design:type",String)],e.prototype,"dropZoneLabel",void 0),p([t.Input(),a("design:type",String)],e.prototype,"dropZoneClassName",void 0),p([t.Input(),a("design:type",Boolean)],e.prototype,"useDragEnter",void 0),p([t.Input(),a("design:type",String)],e.prototype,"contentClassName",void 0),p([t.Input(),a("design:type",Boolean),a("design:paramtypes",[Boolean])],e.prototype,"disabled",null),p([t.Input(),a("design:type",Boolean)],e.prototype,"showBrowseBtn",void 0),p([t.Input(),a("design:type",String)],e.prototype,"browseBtnClassName",void 0),p([t.Input(),a("design:type",String)],e.prototype,"browseBtnLabel",void 0),p([t.Output(),a("design:type",t.EventEmitter)],e.prototype,"onFileDrop",void 0),p([t.Output(),a("design:type",t.EventEmitter)],e.prototype,"onFileOver",void 0),p([t.Output(),a("design:type",t.EventEmitter)],e.prototype,"onFileLeave",void 0),p([t.ContentChild(l,{read:t.TemplateRef}),a("design:type",t.TemplateRef)],e.prototype,"contentTemplate",void 0),p([t.ViewChild("fileSelector",{static:!0}),a("design:type",t.ElementRef)],e.prototype,"fileSelector",void 0),e=p([t.Component({selector:"ngx-file-drop",template:'<div [className]="dropZoneClassName"\r\n     [class.ngx-file-drop__drop-zone--over]="isDraggingOverDropZone"\r\n     (drop)="dropFiles($event)"\r\n     (dragover)="onDragOver($event)"\r\n     (dragenter)="onDragEnter($event)"\r\n     (dragleave)="onDragLeave($event)">\r\n  <div [className]="contentClassName">\r\n    <input \r\n      type="file" \r\n      #fileSelector \r\n      [accept]="accept" \r\n      [attr.directory]="directory || undefined" \r\n      [attr.webkitdirectory]="directory || undefined"\r\n      [attr.mozdirectory]="directory || undefined"\r\n      [attr.msdirectory]="directory || undefined"\r\n      [attr.odirectory]="directory || undefined"\r\n      [multiple]="multiple"\r\n      (change)="uploadFiles($event)" \r\n      class="ngx-file-drop__file-input" \r\n    />\r\n\r\n    <ng-template #defaultContentTemplate>\r\n      <div *ngIf="dropZoneLabel" class="ngx-file-drop__drop-zone-label">{{dropZoneLabel}}</div>\r\n      <div *ngIf="showBrowseBtn">\r\n        <input type="button" [className]="browseBtnClassName" value="{{browseBtnLabel}}" (click)="openFileSelector($event)" />\r\n      </div>\r\n    </ng-template>\r\n\r\n    <ng-template\r\n      [ngTemplateOutlet]="contentTemplate || defaultContentTemplate"\r\n      [ngTemplateOutletContext]="{ openFileSelector: openFileSelector }">\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n',styles:[".ngx-file-drop__drop-zone{height:100px;margin:auto;border:2px dotted #0782d0;border-radius:30px}.ngx-file-drop__drop-zone--over{background-color:rgba(147,147,147,.5)}.ngx-file-drop__content{display:flex;align-items:center;justify-content:center;height:100px;color:#0782d0}.ngx-file-drop__drop-zone-label{text-align:center}.ngx-file-drop__file-input{display:none}"]}),a("design:paramtypes",[t.NgZone,t.Renderer2])],e)}(),c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},f=function(){function e(){}return e=c([t.NgModule({declarations:[d,l],imports:[r.CommonModule],exports:[d,l],providers:[],bootstrap:[d]})],e)}();e.NgxFileDropComponent=d,e.NgxFileDropEntry=i,e.NgxFileDropModule=f,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-file-drop.umd.min.js.map